<section>
  <h2>Gestion des sessions</h2>
  <p>Liste des sessions</p>

  <ng-container *ngIf="sessions.length">
    <table class="table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Formation</th>
          <th>PÃ©riode</th>
          <th>Inscrits</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        @for (let s of sessions) {
          <tr>
            <td>{{ s.id }}</td>
            <td>{{ s.formationId }}</td>
            <td>{{ s.dateDebut | date:'shortDate' }} - {{ s.dateFin | date:'shortDate' }}</td>
            <td>{{ s.candidatsInscrits.length }} / {{ s.maxInscrits }}</td>
            <td>
              <button class="btn btn-sm btn-outline-primary" (click)="toggleCandidates(s.id)">
                {{ showing[s.id] ? 'Cacher' : 'Voir' }} candidats
              </button>
            </td>
          </tr>

          <ng-container *ngIf="showing[s.id]">
            <tr>
              <td colspan="5">
                <ng-container *ngIf="s.candidatsInscrits.length">
                <ul>
                  @for (let c of s.candidatsInscrits) { <li>{{ c }}</li> }
                </ul>
              </ng-container>
<ng-container *ngIf="!(sessions.length)"> <p>Aucun candidat inscrit.</p> }
              <hr />
              <p><strong>Test d'inscription (admin)</strong></p>
              <app-inscription-form (register)="registerFor(s.id, $event)"></app-inscription-form>
            </td>
          </tr></ng-container>
      </tbody>
    </table>
  </ng-container>
<ng-container *ngIf="true"> <p>Aucune session disponible.</p> }
</section>
